# API Documentation\n\n## Base URL\n\n```\nProduction: https://your-ngrok-url.ngrok-io\nLocal Dev: http://localhost:8000\n```\n\n## Authentication\n\n(Optional) Pass API key in header:\n```\nAuthorization: Bearer your-api-key\n```\n\n---\n\n## Endpoints\n\n### Health\n\n#### GET /health\n\nHealth check.\n\n**Response**:\n```json\n{\n  \"status\": \"healthy\",\n  \"service\": \"colab-ai-coder-api\"\n}\n```\n\n#### GET /health/ready\n\nReadiness check.\n\n#### GET /health/live\n\nLiveness check.\n\n---\n\n### Models\n\n#### GET /api/v1/models/available\n\nList available models.\n\n**Response**:\n```json\n{\n  \"models\": [\n    {\n      \"name\": \"qwen2.5-coder:7b-q4_k_m\",\n      \"size\": \"5.2GB\",\n      \"context\": 4096,\n      \"description\": \"...\",\n      \"recommended\": true\n    }\n  ]\n}\n```\n\n#### GET /api/v1/models/current\n\nGet current model info.\n\n**Response**:\n```json\n{\n  \"name\": \"qwen2.5-coder:7b-q4_k_m\",\n  \"size\": \"5.2GB\",\n  \"loaded\": true,\n  \"vram_usage\": \"5.2GB\",\n  \"status\": \"ready\"\n}\n```\n\n---\n\n### Assistant\n\n#### POST /api/v1/assistant/generate\n\nGenerate code.\n\n**Request**:\n```json\n{\n  \"prompt\": \"def hello\",\n  \"task\": \"generate\",\n  \"language\": \"python\",\n  \"max_tokens\": 256,\n  \"temperature\": 0.2\n}\n```\n\n**Response**:\n```json\n{\n  \"response\": \"def hello(name):\\n    print(f'Hello {name}!')\",\n  \"task\": \"generate\",\n  \"tokens_used\": 15,\n  \"model\": \"qwen2.5-coder:7b-q4_k_m\"\n}\n```\n\n#### POST /api/v1/assistant/refactor\n\nRefactor code.\n\n**Request**:\n```json\n{\n  \"prompt\": \"for i in range(len(list)): print(i)\",\n  \"task\": \"refactor\"\n}\n```\n\n**Response**: Same as generate.\n\n#### POST /api/v1/assistant/debug\n\nDebug code and suggest fixes.\n\n**Request**:\n```json\n{\n  \"prompt\": \"buggy code here\",\n  \"task\": \"debug\"\n}\n```\n\n#### POST /api/v1/assistant/audit\n\nAudit code for security issues.\n\n**Request**:\n```json\n{\n  \"prompt\": \"code to audit\",\n  \"task\": \"audit\"\n}\n```\n\n#### POST /api/v1/assistant/chat\n\nGeneral chat.\n\n**Request**:\n```json\n{\n  \"prompt\": \"your question\",\n  \"history\": [\n    {\"role\": \"user\", \"content\": \"...\"},\n    {\"role\": \"assistant\", \"content\": \"...\"}\n  ]\n}\n```\n\n#### GET /api/v1/assistant/templates\n\nGet prompt templates.\n\n**Response**:\n```json\n{\n  \"templates\": {\n    \"refactor\": \"Refactor this code:\\n{code}\",\n    \"debug\": \"Debug this code:\\n{code}\",\n    \"generate\": \"Generate code for:\\n{description}\",\n    \"audit\": \"Audit this code for security:\\n{code}\",\n    \"document\": \"Document this code:\\n{code}\"\n  }\n}\n```\n\n---\n\n## Error Responses\n\n### 400 Bad Request\n```json\n{\n  \"detail\": \"Invalid request parameters\"\n}\n```\n\n### 500 Internal Server Error\n```json\n{\n  \"detail\": \"Error message\"\n}\n```\n\n---\n\n## Rate Limiting\n\n- 100 requests/minute for free tier\n- 1000 requests/minute for pro tier\n\nInclude in response headers:\n```\nX-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1234567890\n```\n\n---\n\n## WebSocket (Streaming)\n\nFor real-time streaming responses:\n\n```\nWS wss://your-url/api/v1/assistant/stream\n```\n\nMessage format:\n```json\n{\"prompt\": \"...\", \"task\": \"generate\"}\n```\n\nResponses stream back in real-time.\n\n---\n\n## Examples\n\n### Python\n\n```python\nimport requests\n\nAPI_URL = \"https://your-ngrok-url.ngrok-io\"\n\nresponse = requests.post(\n    f\"{API_URL}/api/v1/assistant/generate\",\n    json={\n        \"prompt\": \"def factorial(n):\",\n        \"task\": \"generate\",\n        \"max_tokens\": 150\n    }\n)\n\nprint(response.json()[\"response\"])\n```\n\n### JavaScript/TypeScript\n\n```typescript\nconst API_URL = \"https://your-ngrok-url.ngrok-io\";\n\nconst response = await fetch(\n  `${API_URL}/api/v1/assistant/generate`,\n  {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({\n      prompt: \"def factorial(n):\",\n      task: \"generate\",\n      max_tokens: 150\n    })\n  }\n);\n\nconst data = await response.json();\nconsole.log(data.response);\n```\n\n### cURL\n\n```bash\ncurl -X POST https://your-ngrok-url.ngrok-io/api/v1/assistant/generate \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"prompt\": \"def factorial(n):\",\n    \"task\": \"generate\",\n    \"max_tokens\": 150\n  }'\n```\n\n---\n\nFor more info, see [Main Documentation](../README.md).\n